<!doctype html>
<html><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>Rain or Shine: Test</title>
<style>
  body { font-family: system-ui, Arial, sans-serif; padding: 24px; }
  h1 { margin: 0 0 12px; }
  pre { white-space: pre-wrap; background: #f6f6f6; padding: 12px; border-radius: 6px; }
  .ok { color: #0a7; font-weight: 800; font-size: 40px; }
  .err { color: #c33; font-weight: 800; font-size: 24px; }
</style>
</head>
<body>
  <h1>Rain or Shine (Test Page)</h1>
  <div id="advice">Loadingâ€¦</div>
  <pre id="details"></pre>

<script>
(async function() {
  const API = "https://tcetiv24ylpbcj4745rwi6qgjm0awkdt.lambda-url.ap-southeast-1.on.aws/"; // your Function URL

  const adviceEl = document.getElementById('advice');
  const detailsEl = document.getElementById('details');

  try {
    const resp = await fetch(API);
    const text = await resp.text();

    if (!resp.ok) {
      adviceEl.className = "err";
      adviceEl.textContent = `HTTP ${resp.status}`;
      detailsEl.textContent = text.slice(0, 500);
      return;
    }

    let data;
    try { data = JSON.parse(text); }
    catch(e) {
      adviceEl.className = "err";
      adviceEl.textContent = "Bad JSON";
      detailsEl.textContent = text.slice(0, 500);
      return;
    }

    const advice = String(data.advice || "LEAVE").toUpperCase();
    adviceEl.className = advice === "WAIT" ? "err" : "ok";
    adviceEl.textContent = advice;
    detailsEl.textContent = JSON.stringify(data, null, 2);
  } catch (e) {
    adviceEl.className = "err";
    adviceEl.textContent = "Fetch failed";
    detailsEl.textContent = String(e);
  }
})();
</script>
</body></html>
